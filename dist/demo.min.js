!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=2)}([function(t,e,n){"use strict";function r(t){return document.createElement(t)}n.r(e),n.d(e,"htmlEditButton",(function(){return l}));var o=!1,i={prefixString:function(){return"</> quill-html-edit-button: "},get log(){return o?console.log.bind(console,this.prefixString()):function(){}}},l=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o=n&&n.debug,i.log("logging enabled"),e.container.parentElement.querySelectorAll(".ql-toolbar").forEach((function(t){var n=r("span");n.setAttribute("class","ql-formats");var o=r("button");o.innerHTML="&lt;&gt;",o.title="Show HTML source",o.onclick=function(t){t.preventDefault(),function(t){var e=t.container.querySelector(".ql-editor").innerHTML,n=r("div"),o=r("div");o.setAttribute("style","background: #0000007d; position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 9999;"),n.setAttribute("style","background: #ddd; position: absolute; top: 5%; left: 5%; right: 5%; bottom: 5%; border-radius: 10px;");var l=r("i");l.setAttribute("style","margin: 0; display: block;"),l.innerText='Edit HTML here, when you click "OK" the quill editor\'s contents will be replaced';var u=r("div");u.appendChild(l),u.setAttribute("style","position: relative; width: calc(100% - 40px); height: calc(100% - 40px); padding: 20px;");var a=r("textarea");a.setAttribute("style","position: absolute; left:15px; width: calc(100% - 45px); height: calc(100% - 116px);"),a.value=function(t){for(var e=" ".repeat(2),n=0,r=null,o=null,l="",u=0;u<=t.length;u++){r=t.substr(u,1),o=t.substr(u+1,1);var a="<br>"===t.substr(u,4),c="<"===r&&"/"===o&&!a;a&&(l+="\n",n--,u+=4),"<"===r&&"/"!==o&&!a?(l+="\n"+e.repeat(n),n++):c?(--n<0&&(n=0),l+="\n"+e.repeat(n)):" "===r&&" "===o?r="":"\n"===r&&""===t.substr(u,t.substr(u).indexOf("<")).trim()&&(r=""),l+=r}return i.log("formatHTML",{before:t,after:l}),l}(e);var c=r("button");c.innerHTML="Cancel",c.setAttribute("style","margin-right: 20px;");var d=r("button");d.innerHTML="Ok";var s=r("div");s.setAttribute("style","position: absolute; bottom: 20px; transform: scale(1.5); left: calc(50% - 60px)"),s.appendChild(c),s.appendChild(d),u.appendChild(a),u.appendChild(s),n.appendChild(u),o.appendChild(n),document.body.appendChild(o),c.onclick=function(){document.body.removeChild(o)},o.onclick=c.onclick,n.onclick=function(t){t.preventDefault(),t.stopPropagation()},d.onclick=function(){var e=a.value.split(/\r?\n/g).map((function(t){return t.trim()})).join("");t.container.querySelector(".ql-editor").innerHTML=e,document.body.removeChild(o)}}(e)},n.appendChild(o),t.appendChild(n)}))};window.htmlEditButton=l,e.default=l},function(t,e){t.exports=Quill},function(t,e,n){"use strict";n.r(e);var r=n(1),o=n.n(r),i=n(0);o.a.register("modules/htmlEditButton",i.htmlEditButton);console.log("Demo loaded...");new o.a("#editor",{theme:"snow",modules:{toolbar:{container:[[{header:[1,2,3,!1]}],["bold","italic"],["clean"],["image"]]},htmlEditButton:{debug:!0}}})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3F1aWxsLmh0bWxFZGl0QnV0dG9uLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcIlF1aWxsXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RlbW8uanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCIkY3JlYXRlIiwiZWxOYW1lIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiZGVidWciLCJMb2dnZXIiLCJwcmVmaXhTdHJpbmciLCJjb25zb2xlIiwibG9nIiwidGhpcyIsImh0bWxFZGl0QnV0dG9uIiwicXVpbGwiLCJvcHRpb25zIiwiY29udGFpbmVyIiwicGFyZW50RWxlbWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwidG9vbGJhckVsIiwiYnV0dG9uQ29udGFpbmVyIiwic2V0QXR0cmlidXRlIiwiYnV0dG9uIiwiaW5uZXJIVE1MIiwidGl0bGUiLCJvbmNsaWNrIiwiZSIsInByZXZlbnREZWZhdWx0IiwiaHRtbEZyb21FZGl0b3IiLCJxdWVyeVNlbGVjdG9yIiwicG9wdXBDb250YWluZXIiLCJvdmVybGF5Q29udGFpbmVyIiwiaW5uZXJUZXh0IiwidGV4dENvbnRhaW5lciIsImFwcGVuZENoaWxkIiwidGV4dEFyZWEiLCJjb2RlIiwid2hpdGVzcGFjZSIsInJlcGVhdCIsImN1cnJlbnRJbmRlbnQiLCJjaGFyIiwibmV4dENoYXIiLCJyZXN1bHQiLCJwb3MiLCJsZW5ndGgiLCJzdWJzdHIiLCJpc0JyVGFnIiwiaXNDbG9zaW5nVGFnIiwiaW5kZXhPZiIsInRyaW0iLCJiZWZvcmUiLCJhZnRlciIsImZvcm1hdEhUTUwiLCJidXR0b25DYW5jZWwiLCJidXR0b25PayIsImJ1dHRvbkdyb3VwIiwiYm9keSIsInJlbW92ZUNoaWxkIiwic3RvcFByb3BhZ2F0aW9uIiwibm9OZXdsaW5lcyIsInNwbGl0IiwibWFwIiwiZWwiLCJqb2luIiwibGF1bmNoUG9wdXBFZGl0b3IiLCJ3aW5kb3ciLCJRdWlsbCIsInJlZ2lzdGVyIiwidGhlbWUiLCJ0b29sYmFyIiwiaGVhZGVyIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMs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S0MsWUFBWTFCLElBbEVwQmlDLENBQWtCbkQsSUFFcEJPLEVBQWdCYyxZQUFZWixHQUM1QkgsRUFBVWUsWUFBWWQsT0EySDlCNkMsT0FBT3JELGVBQWlCQSxFQUNUQSxhLGNDbktmM0MsRUFBT0QsUUFBVWtHLE8sNkJDQWpCLGtDQUdBQSxJQUFNQyxTQUFTLHlCQUEwQnZELGtCQVN6Q0gsUUFBUUMsSUFBSSxrQkFFQSxJQUFJd0QsSUFBTSxVQUFXLENBQy9CRSxNQUFPLE9BQ1BoRyxRQUFTLENBQ1BpRyxRQUFTLENBQ1B0RCxVQWJxQixDQUN6QixDQUFDLENBQUV1RCxPQUFRLENBQUMsRUFBRyxFQUFHLEdBQUcsS0FDckIsQ0FBQyxPQUFRLFVBQ1QsQ0FBQyxTQUNELENBQUMsV0FXQzFELGVBQWdCLENBQUVOLE9BQU8iLCJmaWxlIjoiZGVtby5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9kaXN0L1wiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMik7XG4iLCJmdW5jdGlvbiAkY3JlYXRlKGVsTmFtZSkge1xyXG4gIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGVsTmFtZSk7XHJcbn1cclxuXHJcbmxldCBkZWJ1ZyA9IGZhbHNlO1xyXG5jb25zdCBMb2dnZXIgPSB7XHJcbiAgcHJlZml4U3RyaW5nKCkge1xyXG4gICAgcmV0dXJuIGA8Lz4gcXVpbGwtaHRtbC1lZGl0LWJ1dHRvbjogYDtcclxuICB9LCAgXHJcbiAgZ2V0IGxvZygpIHtcclxuICAgIGlmICghZGVidWcpIHtcclxuICAgICAgcmV0dXJuICguLi5hbnkpID0+IHt9O1xyXG4gICAgfVxyXG4gICAgY29uc3QgYm91bmRMb2dGbiA9IGNvbnNvbGUubG9nLmJpbmQoXHJcbiAgICAgIGNvbnNvbGUsXHJcbiAgICAgIHRoaXMucHJlZml4U3RyaW5nKClcclxuICAgICk7XHJcbiAgICByZXR1cm4gYm91bmRMb2dGbjtcclxuICB9XHJcbn1cclxuXHJcbmNsYXNzIGh0bWxFZGl0QnV0dG9uIHtcclxuICBjb25zdHJ1Y3RvcihxdWlsbCwgb3B0aW9ucykge1xyXG4gICAgZGVidWcgPSBvcHRpb25zICYmIG9wdGlvbnMuZGVidWdcclxuICAgIExvZ2dlci5sb2coJ2xvZ2dpbmcgZW5hYmxlZCcpO1xyXG4gICAgLy8gQWRkIGJ1dHRvbiB0byBhbGwgcXVpbGwgdG9vbGJhciBpbnN0YW5jZXNcclxuICAgIHF1aWxsLmNvbnRhaW5lci5wYXJlbnRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKFwiLnFsLXRvb2xiYXJcIilcclxuICAgICAgLmZvckVhY2godG9vbGJhckVsID0+IHtcclxuICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSAkY3JlYXRlKFwic3BhblwiKTtcclxuICAgICAgICBidXR0b25Db250YWluZXIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJxbC1mb3JtYXRzXCIpO1xyXG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9ICRjcmVhdGUoXCJidXR0b25cIik7XHJcbiAgICAgICAgYnV0dG9uLmlubmVySFRNTCA9IFwiJmx0OyZndDtcIjtcclxuICAgICAgICBidXR0b24udGl0bGUgPSBcIlNob3cgSFRNTCBzb3VyY2VcIjtcclxuICAgICAgICBidXR0b24ub25jbGljayA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIGxhdW5jaFBvcHVwRWRpdG9yKHF1aWxsKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b24pO1xyXG4gICAgICAgIHRvb2xiYXJFbC5hcHBlbmRDaGlsZChidXR0b25Db250YWluZXIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxhdW5jaFBvcHVwRWRpdG9yKHF1aWxsKSB7XHJcbiAgY29uc3QgaHRtbEZyb21FZGl0b3IgPSBxdWlsbC5jb250YWluZXIucXVlcnlTZWxlY3RvcihcIi5xbC1lZGl0b3JcIikuaW5uZXJIVE1MO1xyXG4gIGNvbnN0IHBvcHVwQ29udGFpbmVyID0gJGNyZWF0ZShcImRpdlwiKTtcclxuICBjb25zdCBvdmVybGF5Q29udGFpbmVyID0gJGNyZWF0ZShcImRpdlwiKTtcclxuICBvdmVybGF5Q29udGFpbmVyLnNldEF0dHJpYnV0ZShcclxuICAgIFwic3R5bGVcIixcclxuICAgIFwiYmFja2dyb3VuZDogIzAwMDAwMDdkOyBwb3NpdGlvbjogZml4ZWQ7IHRvcDogMDsgbGVmdDogMDsgcmlnaHQ6IDA7IGJvdHRvbTogMDsgei1pbmRleDogOTk5OTtcIlxyXG4gICk7XHJcbiAgcG9wdXBDb250YWluZXIuc2V0QXR0cmlidXRlKFxyXG4gICAgXCJzdHlsZVwiLFxyXG4gICAgXCJiYWNrZ3JvdW5kOiAjZGRkOyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogNSU7IGxlZnQ6IDUlOyByaWdodDogNSU7IGJvdHRvbTogNSU7IGJvcmRlci1yYWRpdXM6IDEwcHg7XCJcclxuICApO1xyXG4gIGNvbnN0IHRpdGxlID0gJGNyZWF0ZShcImlcIik7XHJcbiAgdGl0bGUuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJtYXJnaW46IDA7IGRpc3BsYXk6IGJsb2NrO1wiKTtcclxuICB0aXRsZS5pbm5lclRleHQgPVxyXG4gICAgJ0VkaXQgSFRNTCBoZXJlLCB3aGVuIHlvdSBjbGljayBcIk9LXCIgdGhlIHF1aWxsIGVkaXRvclxcJ3MgY29udGVudHMgd2lsbCBiZSByZXBsYWNlZCc7XHJcbiAgY29uc3QgdGV4dENvbnRhaW5lciA9ICRjcmVhdGUoXCJkaXZcIik7XHJcbiAgdGV4dENvbnRhaW5lci5hcHBlbmRDaGlsZCh0aXRsZSk7XHJcbiAgdGV4dENvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXHJcbiAgICBcInN0eWxlXCIsXHJcbiAgICBcInBvc2l0aW9uOiByZWxhdGl2ZTsgd2lkdGg6IGNhbGMoMTAwJSAtIDQwcHgpOyBoZWlnaHQ6IGNhbGMoMTAwJSAtIDQwcHgpOyBwYWRkaW5nOiAyMHB4O1wiXHJcbiAgKTtcclxuICBjb25zdCB0ZXh0QXJlYSA9ICRjcmVhdGUoXCJ0ZXh0YXJlYVwiKTtcclxuICB0ZXh0QXJlYS5zZXRBdHRyaWJ1dGUoXHJcbiAgICBcInN0eWxlXCIsXHJcbiAgICBcInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDoxNXB4OyB3aWR0aDogY2FsYygxMDAlIC0gNDVweCk7IGhlaWdodDogY2FsYygxMDAlIC0gMTE2cHgpO1wiXHJcbiAgKTtcclxuICB0ZXh0QXJlYS52YWx1ZSA9IGZvcm1hdEhUTUwoaHRtbEZyb21FZGl0b3IpO1xyXG4gIGNvbnN0IGJ1dHRvbkNhbmNlbCA9ICRjcmVhdGUoXCJidXR0b25cIik7XHJcbiAgYnV0dG9uQ2FuY2VsLmlubmVySFRNTCA9IFwiQ2FuY2VsXCI7XHJcbiAgYnV0dG9uQ2FuY2VsLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwibWFyZ2luLXJpZ2h0OiAyMHB4O1wiKTtcclxuICBjb25zdCBidXR0b25PayA9ICRjcmVhdGUoXCJidXR0b25cIik7XHJcbiAgYnV0dG9uT2suaW5uZXJIVE1MID0gXCJPa1wiO1xyXG4gIGNvbnN0IGJ1dHRvbkdyb3VwID0gJGNyZWF0ZShcImRpdlwiKTtcclxuICBidXR0b25Hcm91cC5zZXRBdHRyaWJ1dGUoXHJcbiAgICBcInN0eWxlXCIsXHJcbiAgICBcInBvc2l0aW9uOiBhYnNvbHV0ZTsgYm90dG9tOiAyMHB4OyB0cmFuc2Zvcm06IHNjYWxlKDEuNSk7IGxlZnQ6IGNhbGMoNTAlIC0gNjBweClcIlxyXG4gICk7XHJcbiAgYnV0dG9uR3JvdXAuYXBwZW5kQ2hpbGQoYnV0dG9uQ2FuY2VsKTtcclxuICBidXR0b25Hcm91cC5hcHBlbmRDaGlsZChidXR0b25Payk7XHJcbiAgdGV4dENvbnRhaW5lci5hcHBlbmRDaGlsZCh0ZXh0QXJlYSk7XHJcbiAgdGV4dENvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b25Hcm91cCk7XHJcbiAgcG9wdXBDb250YWluZXIuYXBwZW5kQ2hpbGQodGV4dENvbnRhaW5lcik7XHJcbiAgb3ZlcmxheUNvbnRhaW5lci5hcHBlbmRDaGlsZChwb3B1cENvbnRhaW5lcik7XHJcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdmVybGF5Q29udGFpbmVyKTtcclxuXHJcbiAgYnV0dG9uQ2FuY2VsLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcclxuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQob3ZlcmxheUNvbnRhaW5lcik7XHJcbiAgfTtcclxuICBvdmVybGF5Q29udGFpbmVyLm9uY2xpY2sgPSBidXR0b25DYW5jZWwub25jbGljaztcclxuICBwb3B1cENvbnRhaW5lci5vbmNsaWNrID0gZnVuY3Rpb24oZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICB9O1xyXG4gIGJ1dHRvbk9rLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcclxuICAgIGNvbnN0IG91dHB1dCA9IHRleHRBcmVhLnZhbHVlLnNwbGl0KC9cXHI/XFxuL2cpLm1hcChlbCA9PiBlbC50cmltKCkpO1xyXG4gICAgY29uc3Qgbm9OZXdsaW5lcyA9IG91dHB1dC5qb2luKFwiXCIpO1xyXG4gICAgcXVpbGwuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIucWwtZWRpdG9yXCIpLmlubmVySFRNTCA9IG5vTmV3bGluZXM7XHJcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG92ZXJsYXlDb250YWluZXIpO1xyXG4gIH07XHJcbn1cclxuXHJcbi8vIEFkYXB0ZWQgRlJPTSBqc2ZpZGRsZSBoZXJlOiBodHRwczovL2pzZmlkZGxlLm5ldC9idWtzeS9yeHVjZzFnZC9cclxuZnVuY3Rpb24gZm9ybWF0SFRNTChjb2RlKSB7XHJcbiAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgbGV0IHN0cmlwV2hpdGVTcGFjZXMgPSB0cnVlO1xyXG4gIGxldCBzdHJpcEVtcHR5TGluZXMgPSB0cnVlO1xyXG4gIGNvbnN0IHdoaXRlc3BhY2UgPSBcIiBcIi5yZXBlYXQoMik7IC8vIERlZmF1bHQgaW5kZW50aW5nIDQgd2hpdGVzcGFjZXNcclxuICBsZXQgY3VycmVudEluZGVudCA9IDA7XHJcbiAgY29uc3QgbmV3bGluZUNoYXIgPSBcIlxcblwiO1xyXG4gIGxldCBjaGFyID0gbnVsbDtcclxuICBsZXQgbmV4dENoYXIgPSBudWxsO1xyXG5cclxuICBsZXQgcmVzdWx0ID0gXCJcIjtcclxuICBmb3IgKGxldCBwb3MgPSAwOyBwb3MgPD0gY29kZS5sZW5ndGg7IHBvcysrKSB7XHJcbiAgICBjaGFyID0gY29kZS5zdWJzdHIocG9zLCAxKTtcclxuICAgIG5leHRDaGFyID0gY29kZS5zdWJzdHIocG9zICsgMSwgMSk7XHJcblxyXG4gICAgY29uc3QgaXNCclRhZyA9IGNvZGUuc3Vic3RyKHBvcywgNCkgPT09IFwiPGJyPlwiO1xyXG4gICAgY29uc3QgaXNPcGVuaW5nVGFnID0gY2hhciA9PT0gXCI8XCIgJiYgbmV4dENoYXIgIT09IFwiL1wiICYmICFpc0JyVGFnO1xyXG4gICAgY29uc3QgaXNDbG9zaW5nVGFnID0gY2hhciA9PT0gXCI8XCIgJiYgbmV4dENoYXIgPT09IFwiL1wiICYmICFpc0JyVGFnO1xyXG4gICAgaWYgKGlzQnJUYWcpIHtcclxuICAgICAgLy8gSWYgb3BlbmluZyB0YWcsIGFkZCBuZXdsaW5lIGNoYXJhY3RlciBhbmQgaW5kZW50aW9uXHJcbiAgICAgIHJlc3VsdCArPSBuZXdsaW5lQ2hhcjtcclxuICAgICAgY3VycmVudEluZGVudC0tO1xyXG4gICAgICBwb3MgKz0gNDtcclxuICAgIH1cclxuICAgIGlmIChpc09wZW5pbmdUYWcpIHtcclxuICAgICAgLy8gSWYgb3BlbmluZyB0YWcsIGFkZCBuZXdsaW5lIGNoYXJhY3RlciBhbmQgaW5kZW50aW9uXHJcbiAgICAgIHJlc3VsdCArPSBuZXdsaW5lQ2hhciArIHdoaXRlc3BhY2UucmVwZWF0KGN1cnJlbnRJbmRlbnQpO1xyXG4gICAgICBjdXJyZW50SW5kZW50Kys7XHJcbiAgICB9XHJcbiAgICAvLyBpZiBDbG9zaW5nIHRhZywgYWRkIG5ld2xpbmUgYW5kIGluZGVudGlvblxyXG4gICAgZWxzZSBpZiAoaXNDbG9zaW5nVGFnKSB7XHJcbiAgICAgIC8vIElmIHRoZXJlJ3JlIG1vcmUgY2xvc2luZyB0YWdzIHRoYW4gb3BlbmluZ1xyXG4gICAgICBpZiAoLS1jdXJyZW50SW5kZW50IDwgMCkgY3VycmVudEluZGVudCA9IDA7XHJcbiAgICAgIHJlc3VsdCArPSBuZXdsaW5lQ2hhciArIHdoaXRlc3BhY2UucmVwZWF0KGN1cnJlbnRJbmRlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHJlbW92ZSBtdWx0aXBsZSB3aGl0ZXNwYWNlc1xyXG4gICAgZWxzZSBpZiAoc3RyaXBXaGl0ZVNwYWNlcyA9PT0gdHJ1ZSAmJiBjaGFyID09PSBcIiBcIiAmJiBuZXh0Q2hhciA9PT0gXCIgXCIpXHJcbiAgICAgIGNoYXIgPSBcIlwiO1xyXG4gICAgLy8gcmVtb3ZlIGVtcHR5IGxpbmVzXHJcbiAgICBlbHNlIGlmIChzdHJpcEVtcHR5TGluZXMgPT09IHRydWUgJiYgY2hhciA9PT0gbmV3bGluZUNoYXIpIHtcclxuICAgICAgLy9kZWJ1Z2dlcjtcclxuICAgICAgaWYgKGNvZGUuc3Vic3RyKHBvcywgY29kZS5zdWJzdHIocG9zKS5pbmRleE9mKFwiPFwiKSkudHJpbSgpID09PSBcIlwiKVxyXG4gICAgICAgIGNoYXIgPSBcIlwiO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc3VsdCArPSBjaGFyO1xyXG4gIH1cclxuICBMb2dnZXIubG9nKFwiZm9ybWF0SFRNTFwiLCB7XHJcbiAgICBiZWZvcmU6IGNvZGUsXHJcbiAgICBhZnRlcjogcmVzdWx0XHJcbiAgfSk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxud2luZG93Lmh0bWxFZGl0QnV0dG9uID0gaHRtbEVkaXRCdXR0b247XHJcbmV4cG9ydCBkZWZhdWx0IGh0bWxFZGl0QnV0dG9uO1xyXG5leHBvcnQgeyBodG1sRWRpdEJ1dHRvbiB9O1xyXG4iLCJtb2R1bGUuZXhwb3J0cyA9IFF1aWxsOyIsImltcG9ydCBRdWlsbCBmcm9tIFwicXVpbGxcIjtcclxuaW1wb3J0IHsgaHRtbEVkaXRCdXR0b24gfSBmcm9tIFwiLi9xdWlsbC5odG1sRWRpdEJ1dHRvblwiO1xyXG5cclxuUXVpbGwucmVnaXN0ZXIoXCJtb2R1bGVzL2h0bWxFZGl0QnV0dG9uXCIsIGh0bWxFZGl0QnV0dG9uKTtcclxuXHJcbmNvbnN0IGZ1bGxUb29sYmFyT3B0aW9ucyA9IFtcclxuICBbeyBoZWFkZXI6IFsxLCAyLCAzLCBmYWxzZV0gfV0sXHJcbiAgW1wiYm9sZFwiLCBcIml0YWxpY1wiXSxcclxuICBbXCJjbGVhblwiXSxcclxuICBbXCJpbWFnZVwiXVxyXG5dO1xyXG5cclxuY29uc29sZS5sb2coXCJEZW1vIGxvYWRlZC4uLlwiKTtcclxuXHJcbnZhciBxdWlsbCA9IG5ldyBRdWlsbChcIiNlZGl0b3JcIiwge1xyXG4gIHRoZW1lOiBcInNub3dcIixcclxuICBtb2R1bGVzOiB7XHJcbiAgICB0b29sYmFyOiB7XHJcbiAgICAgIGNvbnRhaW5lcjogZnVsbFRvb2xiYXJPcHRpb25zXHJcbiAgICB9LFxyXG4gICAgaHRtbEVkaXRCdXR0b246IHsgZGVidWc6IHRydWUgfVxyXG4gIH1cclxufSk7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=